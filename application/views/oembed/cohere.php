<?php  $node_id = $meta->provider_mid;  #$author = $meta->author_name;  $embed_width = $meta->width;  $embed_height= $meta->height;  $iframe_width= $meta->_iframe_width;  #@todo: Does jquery-oembed.js escape tags in <iframe> :(.  $html =<<<EOF<div class='cohere embed-rsp'><h2 style='font-size:small;'><a href='http://cohere.open.ac.uk/node.php?nodeid=$node_id#conn-neighbour' title='View on Cohere'>$meta->title<span style='position:absolute;top:-99em;'>. Connections by {$meta->author_name} on Cohere</span></a></h2><div style='width:{$embed_width}px;overflow-x:scroll;border-right:1px solid #d3e8e8;'><iframe seamless title='$meta->title' src='http://cohere.open.ac.uk/snippet/snippet-conn-neighbourhood.php?snippet=3&nodeid=$node_id&start=0&max=20&orderby=date&sort=DESC&direction=right&focalnode=$node_id&context=node' width='$iframe_width' height='$embed_height' scrolling='no' frameborder='0'>($meta->title  Connections, by $meta->author_name on Cohere)</iframe></div>EOF;  $view_data = array(      'url'   => $url,      'format'=> $format,      'callback'=>$callback,      'oembed' => (array) $meta,  );  $view_data['oembed']['html'] = str_replace('&', '&amp;', $html);  $this->load->view('oembed/render', $view_data);